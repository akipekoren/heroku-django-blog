{% extends 'base.html' %}

{% block content %}
<!DOCTYPE html>
<html lang="en">

<head>
   
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
      {% load static %}
        <link href="{% static 'blog/css/css/home.css' %}" rel="stylesheet">
        <link href="{% static 'blog/css/css/read-button.css' %}" rel="stylesheet">

</head>
<body>

    <br>

        <nav class="nav d-flex justify-content-between">
            {% for each in most_posted_cats%}
            <a class="p-2 text-muted" href="{% url 'category' each %}" >{{each}}</a>
            {% endfor %}
        </nav>
    <hr>

    {% if post_items.number == 1%}

    <div id="demo" class="carousel slide" data-ride="carousel">
        <ul class="carousel-indicators">
            <li data-target="#demo" data-slide-to="0" class="active"></li>
            <li data-target="#demo" data-slide-to="1"></li>
            <li data-target="#demo" data-slide-to="2"></li>
        </ul>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <a href="{% url 'article-detail' latest_posts.0.slug %}"> 
                    <img src="{{latest_posts.0.header_image.url}}" alt="{{latest_posts.0.title}}">
                </a>
                
                <div class="carousel-caption">
                    <h3>{{latest_posts.0.title}}</h3>
                    <p>{{latest_posts.0.snippet}}</p>
                </div>
            </div>
            <div class="carousel-item">
                  <a href="{% url 'article-detail' latest_posts.1.slug %}"> 
                    <img src="{{latest_posts.1.header_image.url}}" alt="{{latest_posts.1.title}}">
                </a>
                <div class="carousel-caption">
                  <h3>{{latest_posts.1.title}}</h3>
                    <p>{{latest_posts.1.snippet}}</p>
                </div>
            </div>
            <div class="carousel-item">
                  <a href="{% url 'article-detail' latest_posts.2.slug %}"> 
                    <img src="{{latest_posts.2.header_image.url}}" alt="{{latest_posts.2.title}}">
                </a>
                <div class="carousel-caption">
                    <h3>{{latest_posts.2.title}}</h3>
                    <p>{{latest_posts.2.snippet}}</p>
                </div>
            </div>
        </div>
        <a class="carousel-control-prev" href="#demo" data-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </a>
        <a class="carousel-control-next" href="#demo" data-slide="next">
            <span class="carousel-control-next-icon"></span>
        </a>
    </div>

    <br/>
    <br/>


        <hr>
    <div class="row">
        <div class="col-lg-8">
            <div class="row">
                <div class="col-12">
                    <div class="section-title">
                        <h2>Editor's Pick</h2>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="post-entry-1">
                        <a href="{% url 'article-detail' suggested_posts.0.slug %}" ><img src="{{suggested_posts.0.header_image.url}}" style="width:100%; height:300px;"   alt="Image" class="img-fluid"></a>
                        <h2><a href="{% url 'article-detail' suggested_posts.0.slug %}" style="color: black" >{{suggested_posts.0.title}}</a></h2>
                        <p>{{suggested_posts.0.snippet}}.</p>
                        <div class="post-meta">
                            <span class="d-block">{{suggested_posts.0.author.first_name}} {{ suggested_posts.0.author.last_name}} in <a href="{% url 'category' suggested_posts.0.category %}" style="color:black">{{suggested_posts.0.category}}</a></span>
                            <span class="date-read">{{suggested_posts.0.date}} <span class="mx-1">â€¢</span> 3 min read <span
                                    class="icon-star2"></span></span>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="editor-entry">
                        <div class="row"  style="background-color: rgb(247, 245, 245); max-width: 500px;">
                            <div class="col-lg-6">
                                <img src="{{suggested_posts.1.header_image.url}}" alt="blog-image" style="width:100%; height:150px;">
                            </div>

                            <div class="col-lg-6">
                                <a href="{% url 'article-detail' suggested_posts.1.slug %}" style="color:black">  <h5>{{suggested_posts.1.title}}</h5> </a>
                                <p>{{suggested_posts.1.category}}</p>
                            </div>
                        </div>
                 
                    </div>
                    <div class="editor-entry d-flex mt-3">
                                        <div class="row" style="background-color: rgb(247, 245, 245);  max-width: 500px">
                                            <div class="col-lg-6">
                                                <img src="{{suggested_posts.2.header_image.url}}" alt="blog-image" style="width:100%; height:150px;">
                                            </div>
                                        
                                            <div class="col-lg-6">
                                                <a href="{% url 'article-detail' suggested_posts.2.slug %}" style="color:black">  <h5>{{suggested_posts.2.title}}</h5> </a>
                                       
                                                <p>{{suggested_posts.2.category}}</p>
                                            </div>
                                        </div>
                   
                    </div>
                    <div class="editor-entry d-flex mt-3">
                                        <div class="row" style="background-color: rgb(247, 245, 245);  max-width: 500px">
                                            <div class="col-lg-6">
                                                <img src="{{suggested_posts.3.header_image.url}}" alt="blog-image" style="width:100%; height:150px;">
                                            </div>
                                        
                                            <div class="col-lg-6">
                                               <a href="{% url 'article-detail' suggested_posts.3.slug %}" style="color:black">  <h5>{{suggested_posts.3.title}}</h5> </a>
                                                <p>{{suggested_posts.3.category}}</p>
                                            </div>
                                        </div>
             
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="section-title">
                <h2>Trending</h2>
            </div>
            <div class="trend-entry d-flex">
            <ol>
                <li>
                    <div>
                    <a style="color:black" href="{% url 'article-detail' most_liked_posts.0.slug %}" >{{most_liked_posts.0.title}}</a>
                        <p>{{most_liked_posts.0.author}} in {{most_liked_posts.0.category}}</p>
                    </div>
            </li>
                <li>
                    <div>
                    <a style="color:black" href="{% url 'article-detail' most_liked_posts.1.slug %}" > {{most_liked_posts.1.title}}</a> 
                        <p>{{most_liked_posts.1.author}} in {{most_liked_posts.1.category}}</p>
                    </div>
                </li>
                <li>
                    <div>
                       <a style="color:black" href="{% url 'article-detail' most_liked_posts.2.slug %}" > {{most_liked_posts.2.title}} </a>
                        <p>{{most_liked_posts.2.author}} in {{most_liked_posts.2.category}}</p>
                    </div>
                </li>
                <li>
                    <div>
                     <a style="color:black" href="{% url 'article-detail' most_liked_posts.3.slug %}" > {{most_liked_posts.3.title}}</a>
                        <p>{{most_liked_posts.3.author}} in {{most_liked_posts.3.category}}</p>
                    </div>
                </li>
            </ol>
            </div>
         
     
        </div>
    </div>

    
    <hr>


    {%endif%}
    <br>

    <div class= "container ">
      <div class="text-center row">
          {% for post in post_items %}
                {% if forloop.counter0|divisibleby:2 %}
                <div class="col-lg-6" >
                  <div class="image-part">
                      {% if post.header_image %}
                      <a href="{% url 'article-detail' post.slug %}">
                        <img class="card-img-top" src="{{post.header_image.url}}" width="150" height="225" alt="Card image cap">
                      </a>
                      {%endif%}
                  </div>
                    <div class="body-part" style=" height: 300px;">
                      <div class="card-body">
                        <h3 class="card-title">{{post.title}}</h3>
                        <p class="small text-muted">
                          <b><i><small> by {{post.author.first_name}} {{post.author.last_name}}
                              </small></i></b>
                          / {{post.date}}
                          {%if user.is_authenticated %}
                          {% if user.id == post.author.id%}
                          / <small><a href="{% url 'edit-post' post.slug %}">Edit</a></small>
                          / <small><a href="{% url 'delete-post' post.slug %}">Delete</a></small>
                          {%endif%}
                          {%endif%}
                        </p>
                  
                                    <div style= "height:200px;">
                                        <div style="height:50%;">
                                            <p class="card-text">{{post.snippet}}</p>
                                        </div>
                                        <br/>
                                        <div style="top:100%;" >
                                    <i><a class="read"  target="_blank" href="{% url 'article-detail' post.slug %}">Read more</a></i>

                                        </div>
                                  
                
                                    </div>   
                      </div>

                  </div>
                </div>
                {%else%}
                <div class="col-lg-6">
                      <div class="image-part">
                        {% if post.header_image %}
                        <a href="{% url 'article-detail' post.slug %}">
                          <img class="card-img-top" src="{{post.header_image.url}}" width="150" height="225" alt="Card image cap">
                        </a>
                        {%endif%}
                      </div>
                              <div class="body-part" style=" height: 300px;">
                                <div class="card-body">
                                  <h3 class="card-title">{{post.title}}</h3>
                                  <p class="small text-muted">
                                    <b><i><small> by {{post.author.first_name}} {{post.author.last_name}}
                                        </small></i></b>
                                    / {{post.date}}
                                    {%if user.is_authenticated %}
                                    {% if user.id == post.author.id%}
                                    / <small><a href="{% url 'edit-post' post.slug %}">Edit</a></small>
                                    / <small><a href="{% url 'delete-post' post.slug %}">Delete</a></small>
                                    {%endif%}
                                    {%endif%}
                                  </p>
                                  
                       
                                    <div style="height:200px;">
                                        <div style="height:50%;">
                                            <p class="card-text">{{post.snippet}}</p>
                                        </div>
                                        <br/>
                                        <div style="top:100%;" >
                                    <i><a class="read"  target="_blank" href="{% url 'article-detail' post.slug %}">Read more</a></i>

                                        </div>
                                  
                
                                    </div>                        
                                </div>
                              
                              </div>
                </div>
                {%endif%}
          {%endfor%}

            <br>
            <br>
    
      </div>
    </div>
    
            <ul class="pagination justify-content-center" >
            {% if post_items.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page=1" aria-label="Previous" style="color:black;">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">begin</span>
                </a>
            </li> {% endif %}
        
            {% for n in post_items.paginator.page_range %}
            {% if post_items.number == n %}
            <li class="page-item active"  >
                <span class="page-link">{{ n }}</span>
            </li>
            {% elif n > post_items.number|add:'-3' and n < post_items.number|add:'3' %} <li class="page-item"><a
                class="page-link" style="color:black;" href="?page={{ n }}">{{ n }}</a></li>
                {% endif %}
                {% endfor %}
        
                {% if post_items.has_next %}
                <li class="page-item">
                <a class="page-link" style="color:black;" href="?page={{ post_items.paginator.num_pages }}" aria-label="Next">
                    <span aria-hidden="true">&raquo;</span>
                    <span class="sr-only">end</span>
                </a>
                </li>
                {% endif %}
            </ul>
 
    </div>
</div>
</body>

</html>
{% endblock %}


